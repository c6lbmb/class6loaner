---
import BaseLayout from "../../layouts/BaseLayout.astro";
import SponsorSlot from "../../components/SponsorSlot.astro";
import { CITIES } from "../../data/cities";

export function getStaticPaths() {
  return CITIES.map((c) => ({
    params: { slug: c.slug },
    props: { city: c },
  }));
}

const { city } = Astro.props;

const cityDisplay = `${city.name}, ${city.province}`;
const title = `${city.name} Motorcycle Road Test Guide — Calm, Safety-First | Class6Loaner`;
const description =
  `A practical, anxiety-reducing guide for ${cityDisplay}. What to expect, what to bring, and how mentors help test-takers stay calm and safe.`;

const canonicalPath = `/cities/${city.slug}`;
const cityParam = `?city=${encodeURIComponent(city.slug)}`;
---

<BaseLayout title={title} description={description} canonicalPath={canonicalPath}>
  <!-- HERO -->
  <section class="card">
    <div class="muted" style="font-weight:900;">City guide</div>

    <h1 style="margin:8px 0 0; font-weight:1000;">
      {city.name}: calm, confident, safety-first riding starts here
    </h1>

    <p class="muted" style="margin:10px 0 0; max-width:85ch;">
      If you’re stressed about test day, you’re not alone. This page is built to reduce anxiety by making things predictable:
      what happens, what to bring, and how to avoid the most common mistakes — with a safety-first mindset.
    </p>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;">
      <a class="cta" href="https://borrowmybike.ca" rel="noopener" target="_blank">
        Book / Become a mentor →
      </a>
      <a class="cta" href={`/road-test-guide${cityParam}`}>Read the full guide →</a>
      <a class="cta" href={`/become-a-mentor${cityParam}`}>Become a mentor →</a>
    </div>

    <div class="muted" style="margin-top:12px; font-size:13px;">
      Educational content only. Registry rules vary — always follow the examiner’s direction.
    </div>
  </section>

  <!-- MAIN + SPONSORS -->
  <section class="grid grid-2" style="margin-top:14px;">
    <!-- LEFT CONTENT -->
    <div class="card">
      <h2 style="margin:0 0 10px; font-weight:1000;">What happens on test day (simple timeline)</h2>

      <ol style="margin:0; padding-left:18px;">
        <li><b>Arrive early</b> so you’re not making rushed decisions under pressure.</li>
        <li><b>Check-in & documents</b> (ID, paperwork, whatever the registry requires).</li>
        <li><b>Bike + gear check</b>: the examiner confirms roadworthiness + safety basics.</li>
        <li><b>Road test</b>: focus on smooth, safe control — not speed or “impressing.”</li>
        <li><b>Wrap-up</b>: results, feedback, and you’re done.</li>
      </ol>

      <h2 style="margin:18px 0 10px; font-weight:1000;">The “don’t panic” checklist</h2>

      <div class="grid" style="grid-template-columns: 1fr; gap:10px;">
        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">Bring</div>
          <ul style="margin:8px 0 0; padding-left:18px;">
            <li>Your required ID and registry paperwork</li>
            <li>Any confirmation details for your appointment</li>
            <li>Time buffer (arrive early)</li>
          </ul>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">Wear (protective gear)</div>
          <ul style="margin:8px 0 0; padding-left:18px;">
            <li>Proper helmet</li>
            <li>Jacket + gloves</li>
            <li>Long pants</li>
            <li>Closed-toe boots (ideally riding boots)</li>
          </ul>
          <div class="muted" style="margin-top:8px; font-size:13px;">
            If you’re unsure, over-prepare. It’s better than showing up and being turned away.
          </div>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">Mental cues that actually help</div>
          <ul style="margin:8px 0 0; padding-left:18px;">
            <li>Slow breathing before you start</li>
            <li>Ride smooth, not “fast”</li>
            <li>Look where you want to go (head up)</li>
            <li>If you make a small mistake — reset and continue calmly</li>
          </ul>
        </div>
      </div>

      <h2 style="margin:18px 0 10px; font-weight:1000;">Weather & reschedules</h2>

      <p class="muted" style="margin:0; max-width:85ch;">
        Weather can change fast. If the registry reschedules due to conditions, the goal is that nobody gets penalized —
        especially if nobody has checked in yet. Safety &gt; forcing a test.
      </p>

      <div class="card" style="padding:14px; margin-top:10px;">
        <div style="font-weight:1000;">Best practice</div>
        <ul style="margin:8px 0 0; padding-left:18px;">
          <li>If you get a reschedule call/text, communicate early.</li>
          <li>Don’t wait until the last minute if conditions are clearly unsafe.</li>
          <li>Rebook calm. Ride safe.</li>
        </ul>
      </div>

      <h2 style="margin:18px 0 10px; font-weight:1000;">For mentors in {city.name}</h2>

      <p class="muted" style="margin:0; max-width:85ch;">
        Mentors help by making test day calm and predictable. You’re not an instructor, and you’re not “coaching during the test.”
        Road tests are booked under the assumption the test-taker has already practiced riding.
        Mentors can offer calm reassurance and a few common-sense pointers through in-app messaging — but we recommend no teaching sessions and no last-minute “training” on test day.
        Bookings are short, and mentors are compensated for being prepared, punctual, and professional (details are inside the app).
      </p>

      <div class="grid" style="grid-template-columns: 1fr; gap:10px; margin-top:10px;">
        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">A smart meet-up pattern</div>
          <div class="muted" style="margin-top:6px;">
            Meet 15–25 minutes early at the registry. If everyone’s comfortable and it’s safe, the test-taker can sit on the bike
            and do a slow lap or two in the parking lot to get familiar — not “training,” just settling into the controls.
          </div>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">Documents + keys on test day</div>
          <div class="muted" style="margin-top:6px;">
            If the mentor prefers not to hand over papers/keys immediately, they can go into the registry with the test-taker and
            provide documents to staff, or wait by the bike until the examiner comes out for the visual inspection.
          </div>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">What mentors should NOT do</div>
          <ul style="margin:8px 0 0; padding-left:18px;">
            <li>Argue with examiners or push unsafe choices</li>
            <li>Encourage riding beyond comfort or conditions</li>
            <li>Provide riding lessons or “practice sessions” (the road test assumes prior practice)</li>
            <li>Make promises about outcomes (“you’ll pass”) — nobody can guarantee that</li>
          </ul>
        </div>
      </div>

      <h2 style="margin:18px 0 10px; font-weight:1000;">FAQ</h2>

      <div class="grid" style="gap:10px;">
        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">What if the registry refuses the test after inspection?</div>
          <div class="muted" style="margin-top:6px;">
            This can happen for bike-readiness or test-taker readiness reasons. The safest approach is to record the reason calmly and rebook.
          </div>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">What if weather makes it unsafe?</div>
          <div class="muted" style="margin-top:6px;">
            Don’t force it. If conditions are clearly unsafe or the registry reschedules, prioritize safety and rebook.
            A safe reschedule is always better than a risky test day.
          </div>
        </div>

        <div class="card" style="padding:14px;">
          <div style="font-weight:1000;">Do mentors teach people how to ride?</div>
          <div class="muted" style="margin-top:6px;">
            No. Mentors are there to provide a road-test-ready bike and a calm, safety-first experience.
            The test-taker should already have practice riding before booking a road test.
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:14px; padding:14px;">
        <div style="font-weight:1000;">Ready to book?</div>
        <div class="muted" style="margin-top:6px;">
          When you have your test date/time, request a mentor and bike through the app. Keep it simple, show up early, ride safe.
        </div>
        <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
          <a class="cta" href="https://borrowmybike.ca" rel="noopener" target="_blank">Go to BorrowMyBike →</a>
          <a class="cta" href={`/become-a-mentor${cityParam}`}>Become a mentor →</a>
        </div>
      </div>
    </div>

    <!-- RIGHT SIDEBAR (SPONSORS) -->
    <div class="grid">
      <SponsorSlot cityName={city.name} slotNumber={1} />
      <SponsorSlot cityName={city.name} slotNumber={2} />
      <SponsorSlot cityName={city.name} slotNumber={3} />
      <SponsorSlot cityName={city.name} slotNumber={4} />
    </div>
  </section>
</BaseLayout>
